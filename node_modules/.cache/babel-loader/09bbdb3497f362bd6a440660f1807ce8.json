{"ast":null,"code":"import { resetLoginForm } from \"./loginForm.js\";\nimport { resetSignupForm } from \"./signupForm.js\";\nimport { fetchOrganizations, getMyOrganizations, clearOrganizations } from \"./myOrganizations.js\"; // synchronous action creators\n\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  };\n};\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  };\n}; // asynchronous action creators\n\nexport const login = (credentials, history) => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/api/v1/login`, {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    }).then(r => r.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setCurrentUser(response.data));\n        dispatch(fetchOrganizations()) || dispatch(getMyOrganizations());\n        dispatch(resetLoginForm());\n        history.push('/');\n      }\n    }).catch(console.log);\n  };\n};\nexport const signup = (credentials, history) => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    };\n    return fetch(`http://localhost:3001/api/v1/signup`, {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    }).then(r => r.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setCurrentUser(response.data));\n        dispatch(fetchOrganizations());\n        dispatch(resetSignupForm());\n        history.push('/');\n      }\n    }).catch(console.log);\n  };\n};\nexport const logout = event => {\n  return dispatch => {\n    dispatch(clearCurrentUser());\n    dispatch(clearOrganizations());\n    return fetch(`http://localhost:3001/api/v1/logout`, {\n      credentials: \"include\",\n      method: \"DELETE\"\n    });\n  };\n};\nexport const getCurrentUser = () => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/api/v1/get_current_user`, {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(r => r.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setCurrentUser(response.data));\n        dispatch(fetchOrganizations()) || dispatch(getMyOrganizations());\n      }\n    }).catch(console.log);\n  };\n};","map":{"version":3,"names":["resetLoginForm","resetSignupForm","fetchOrganizations","getMyOrganizations","clearOrganizations","setCurrentUser","user","type","clearCurrentUser","login","credentials","history","dispatch","fetch","method","headers","body","JSON","stringify","then","r","json","response","error","alert","data","push","catch","console","log","signup","userInfo","logout","event","getCurrentUser"],"sources":["/Users/lesliegonzalez/Development/code/centerpoint-frontend/src/actions/currentUser.js"],"sourcesContent":["import { resetLoginForm } from \"./loginForm.js\"\nimport { resetSignupForm } from \"./signupForm.js\"\nimport { fetchOrganizations, getMyOrganizations, clearOrganizations } from \"./myOrganizations.js\"\n\n// synchronous action creators\n\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  }\n}\n\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  }\n}\n\n// asynchronous action creators\n\nexport const login = (credentials, history) => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/api/v1/login`, {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response.data))\n          dispatch(fetchOrganizations()) || dispatch(getMyOrganizations())\n          dispatch(resetLoginForm())\n          history.push('/')\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const signup = (credentials, history) => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    }\n    return fetch(`http://localhost:3001/api/v1/signup`, {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response.data))\n          dispatch(fetchOrganizations())\n          dispatch(resetSignupForm())\n          history.push('/')\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const logout = event => {\n  return dispatch => {\n    dispatch(clearCurrentUser())\n    dispatch(clearOrganizations())\n    return fetch(`http://localhost:3001/api/v1/logout`, {\n      credentials: \"include\",\n      method: \"DELETE\"\n    })\n  }\n}\n\nexport const getCurrentUser = () => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/api/v1/get_current_user`, {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response.data))\n          dispatch(fetchOrganizations()) || dispatch(getMyOrganizations())\n        }\n      })\n      .catch(console.log)\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}